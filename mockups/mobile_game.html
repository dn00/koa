<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
    <title>KOA Mobile V1</title>
    <link rel="stylesheet" href="common.css">
    <link rel="stylesheet" href="cards.css">
    <link rel="stylesheet" href="koa.css">
    <link rel="stylesheet" href="mobile.css">
</head>

<body>

    <!-- DEVICE FRAME -->
    <div class="device-frame">

        <!-- TOP HUD -->
        <div class="hud">
            <div class="hud-target">Target: Smart Fridge</div>
            <div class="hud-stats">Turn 3/6</div>
        </div>

        <!-- ARENA (KOA) -->
        <div class="arena">
            <!-- Reusing the KOA orb structure, slightly scaled -->
            <div class="koa-orb mini-koa state-suspicious" id="koaDaemon">
                <div class="koa-core"></div>
                <div class="koa-face">
                    <div class="eye left"></div>
                    <div class="eye right"></div>
                </div>
            </div>

            <!-- Dialogue Bubble -->
            <div class="dialogue-bubble" id="dialogue">
                "Prove you were asleep at 2am. My sensors say otherwise."
            </div>
        </div>

        <!-- PLAYER HAND -->
        <div class="hand-area">
            <div class="hand-scroll">

                <!-- CARD 1: SLEEP LOG -->
                <article class="card card-log" onclick="selectCard(this)">
                    <div class="card-trust trust-verified">Verified</div>
                    <div class="card-title">Sleep Tracker</div>
                    <div class="card-body">
                        LOG: HEART_RATE < 60<br>
                            TIME: 02:00 - 06:00<br>
                            STATUS: ASLEEP
                    </div>
                    <div class="card-tags">
                        <span class="tag">BIOMETRIC</span>
                    </div>
                </article>

                <!-- CARD 2: PHOTO (Sketchy) -->
                <article class="card card-screenshot" onclick="selectCard(this)">
                    <div class="screenshot-preview" style="height:80px; background:#444;"></div>
                    <div class="card-content">
                        <div class="card-title">Bedroom Cam</div>
                        <div class="card-trust trust-sketchy">Sketchy</div>
                    </div>
                </article>

                <!-- CARD 3: RECEIPT -->
                <article class="card card-receipt" onclick="selectCard(this)">
                    <div class="card-trust trust-plausible">Plausible</div>
                    <div class="card-title">Uber Eats</div>
                    <div class="card-body">
                        DELIVERED: 01:58 AM<br>
                        ITEM: PIZZA<br>
                        LOC: HOME
                    </div>
                </article>

                <!-- CARD 4: SENSOR -->
                <article class="card card-sensor" onclick="selectCard(this)">
                    <div class="card-trust trust-verified">Verified</div>
                    <div class="card-title">Motion Det.</div>
                    <div class="metric-value">0 <span class="metric-unit">ACTIVITY</span></div>
                    <svg class="sparkline" viewBox="0 0 100 20" preserveAspectRatio="none">
                        <polyline points="0,18 100,18" fill="none" stroke="currentColor" stroke-width="2" />
                    </svg>
                </article>

            </div>

            <!-- ACTION BAR -->
            <div class="action-bar">
                <button class="btn-submit" onclick="submitMove()">
                    SUBMIT EVIDENCE
                </button>
            </div>
        </div>

    </div>

    <script>
        function selectCard(card) {
            // Toggle selection
            card.classList.toggle('selected');

            // Feedback
            if (card.classList.contains('selected')) {
                // Change KOA Mood
                document.getElementById('koaDaemon').className = 'koa-orb mini-koa state-curious';
                document.getElementById('dialogue').innerText = "Analyzing selection...";
            } else {
                // Revert if empty
                const anySelected = document.querySelectorAll('.card.selected').length > 0;
                if (!anySelected) {
                    document.getElementById('koaDaemon').className = 'koa-orb mini-koa state-neutral';
                    document.getElementById('dialogue').innerText = "Waiting for input.";
                }
            }
        }

        function submitMove() {
            const selected = document.querySelectorAll('.card.selected');
            if (selected.length === 0) {
                document.getElementById('dialogue').innerText = "Select something first.";
                document.getElementById('koaDaemon').className = 'koa-orb mini-koa state-annoyed'; // assume state-annoyed exists or fallback
                return;
            }

            // Simulate submission
            document.getElementById('koaDaemon').className = 'koa-orb mini-koa state-hostile';
            document.getElementById('dialogue').innerText = "Verifying claims...";

            setTimeout(() => {
                document.getElementById('koaDaemon').className = 'koa-orb mini-koa state-neutral';
                document.getElementById('dialogue').innerText = "Access Granted. For now.";
                // Reset
                selected.forEach(c => c.classList.remove('selected'));
            }, 2000);
        }
    </script>

</body>

</html>